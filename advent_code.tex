\documentclass{article}

\usepackage{fontspec}
\usepackage{unicode-math}

\usepackage{fancyvrb}

\usepackage{hyperref}

\setmainfont{TeX Gyre Pagella}
\setmathfont{TeX Gyre Pagella Math}

\input{answers.code.tex}

\title{Advent of Code 2022: \LaTeX3 Solutions}
\author{Andrew Stacey \\ \url{loopspace@mathforge.org}}
\date{2022-12-01}

\renewcommand\thesubsection{Day \arabic{subsection}:}

\begin{document}

\maketitle

\section{Introduction}

This is my attempt to solve the Advent of Code 2022 problems in \LaTeX3.

Following from last year, I'm abandoning the \Verb!dtx! file format and using just a normal \LaTeX\ file and will input a \LaTeX3 file that actually contains the code.
From the outset I'm also using the caching system that I developed during last year's calendar.


\section{Solutions}

\subsection{Calories}

I'm not a fan of optimisation for its own sake, so for the second part of the challenge then I used a scratch sequence which I prepopulated with three zeros.
After working out each elf's quota, I added it to the sequence, then sorted the sequence, and removed the smallest value.
This is decidedly not optimal, but it was fast enough.

\begin{enumerate}
\item The largest amount of calories carried by a single elf is: \MaxCalories*{Day01}
\item The amount of calories carried by the three elves carrying the most is: \MaxCalories{Day01}
\end{enumerate}

\subsection{Rock, Paper, Scissors}

This one was a bit of modular arithmetic -- convert the letters to numbers \(0\) to \(2\), then use modular arithmetic to figure out who won.
If \(x\) is the opponent's play and \(y\) the elf's strategy, then the winning score is given by:
%
\[
  z = y - x \mod 3
  \]
%
where \(z = 0\) is a draw, \(-1\) a loss, and \(1\) a win.
To convert it to points, we need \(3 \times z\) for the game score and \(y + 1\) for the points for the play.

If given the desired outcome, we can recover \(y\) via \(x + z \mod 3\).

The only catch is that \LaTeX3 uses signed modular arithmetic, so \(-2 \mod 3\) is \(-2\).
To guard against this, we add \(3\) from time to time.

\begin{enumerate}
\item The score for the simple strategy is: \RPSScore*{Day02}
\item The score for the trickier strategy is: \RPSScore{Day02}
\end{enumerate}

\subsection{Rucksacks}

Fairly straightforward, this one.
I toyed with being a bit creative on the ways to figure out the overlaps between the token lists, but in the end \Verb!\tl_if_in! was too straightforward to ignore.
I didn't know about \Verb!\tl_range:nnn! before this, which is a nice thing to add to my repertoire.

\begin{enumerate}
\item The sum of the priorities of the overlapping items in the rucksacks is: \Rucksack*{Day03}
\item The sum of the priorities of the badges in the rucksacks is: \Rucksack{Day03}
\end{enumerate}

\end{document}
